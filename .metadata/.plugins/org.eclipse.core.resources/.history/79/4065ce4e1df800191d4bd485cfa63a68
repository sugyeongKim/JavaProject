package view;


import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JLayeredPane;
import javax.swing.JTextField;

import assets.DBConnectionMgr;

public class LoginDialog extends JFrame{
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	private insertLogin insert;
	public LoginDialog() {
		super("객실 예약");
		
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		
		JButton btn  = new JButton("Show Dialog");

		insert = new insertLogin(this, "정보 입력");
		btn.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				insert.setVisible(true);
			}
		});
		getContentPane().add(btn);
		setSize(250,200);
		setVisible(true);
	}
	public static void main(String[] ar) {
		new LoginDialog();
	}
}


class insertLogin extends JDialog{
	private static final long serialVersionUID = 1L;
	private JTextField name = new JTextField(15);
	private JTextField age = new JTextField(15);
	private JTextField gender = new JTextField(15);
	private JTextField addr = new JTextField(15);
	private JTextField tel = new JTextField(15);
	private JButton insertButton = new JButton();
	
	private JLabel nameLabel = new JLabel("이름");
	private JLabel ageLabel = new JLabel("나이");
	private JLabel genderLabel = new JLabel("성별");
	private JLabel addrLabel = new JLabel("주소");
	private JLabel telLabel = new JLabel("전화번호");
	
	
	public insertLogin(JFrame frame, String title) {
		super(frame,title);
		
		setLayout(null);
        JLayeredPane layeredPane = new JLayeredPane();
        layeredPane.setBounds(0, 0, 200, 200);
        layeredPane.setLayout(null);
        nameLabel.setBounds(20,20,50,20);
        name.setBounds(50,20,100,20);
        
        ageLabel.setBounds(20, 50, 50, 20);
        age.setBounds(50, 50, 100, 20);
        
        genderLabel.setBounds(20, 80, 50, 20);
        gender.setBounds(50, 80, 100, 20);
        
        addrLabel.setBounds(180, 50, 50, 20);
        addr.setBounds(240, 50, 100, 20);
        
        telLabel.setBounds(180, 80, 100, 20);
        tel.setBounds(240, 80, 100, 20);
        
        insertButton.setBounds(130, 115, 100, 30);
        
		add(name);add(nameLabel);
		add(age);add(ageLabel);
		add(gender);add(genderLabel);
		add(addr);add(addrLabel);
		add(tel);add(telLabel);
		add(insertButton);

		insertButton.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				System.out.println(name.getText());
				setVisible(false);
			}
		});
		
		setSize(400, 200);
	}
	
	public boolean insertData() throws Exception {
		boolean flag=true;
		DBConnectionMgr pool = DBConnectionMgr.getInstance();

		Connection con = null;
		PreparedStatement pstmt = null;
		String sql = null;
		ResultSet rs = null;

		con = pool.getConnection();
		sql = "insert into member_test (NUM, NAME, GENDER, AGE, TEL, ADDR) values ('test', '1234');";
		return flag;
	}
}
